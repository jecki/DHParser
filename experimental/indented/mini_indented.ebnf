@whitespace = horizontal
@disposable = EOF, LF, SAME_INDENT
@drop       = strings, whitespace, EOF, LF, SAME_INDENT
tree     = INDENT node DEDENT /\s*/ EOF
INDENT   = / */
node     = tag_name [content]

content  = string | children
children = &(LF HAS_DEEPER_INDENT)
           LF INDENT ยง node { LF SAME_INDENT ยง node }
           !(LF HAS_DEEPER_INDENT) DEDENT
tag_name = /\w+/~
string   = '"' ยง /(?:"|[^"\n])*/ '"' ~

SAME_INDENT       = :INDENT ยง !/ /
HAS_DEEPER_INDENT = :INDENT / +/
DEDENT            = &:?INDENT
LF       = /\n/
EOF      = !/./
