# BibTeX-Grammar

@ testing     = True
@ whitespace  = /\s*/
@ ignorecase  = True
@ comment     = /%.*(?:\n|$)/

bibliography = { preamble | comment | entry }

preamble      = "@Preamble{" /"/ pre_code /"/~ ยง"}"
pre_code      = { /[^"%]+/ | /%.*\n/ }

comment       = "@Comment{" text ยง"}"

entry         = /@/ type "{" key { "," field ยง"=" content } ยง"}"
type          = /\w+/
key           = /[^ \t\n,%]+/~
field         = /\w+/~
content       = "{" text "}" | plain_content

plain_content = { /[^,%]+/ | /(?=%)/~ }
text          = { /(?:\\\{|\\\}|[^}%])+/~ | /\{/ text /\}/ | /(?=%)/~ }
