<syntax>
  <directive>
    <symbol>comment</symbol>
    <regexp>/#.*(?:\n|$)/</regexp>
  </directive>
  <directive>
    <symbol>whitespace</symbol>
    <regexp>/\s*/</regexp>
  </directive>
  <directive>
    <symbol>literalws</symbol>
    <symbol>right</symbol>
  </directive>
  <directive>
    <symbol>drop</symbol>
    <symbol>whitespace</symbol>
  </directive>
  <definition>
    <symbol>syntax</symbol>
    <term>
      <option>
        <term>
          <whitespace>~</whitespace>
          <regexp>//</regexp>
        </term>
      </option>
      <repetition>
        <expression>
          <symbol>definition</symbol>
          <symbol>directive</symbol>
        </expression>
      </repetition>
      <:Token>§</:Token>
      <symbol>EOF</symbol>
    </term>
  </definition>
  <definition>
    <symbol>definition</symbol>
    <term>
      <symbol>symbol</symbol>
      <:Token>§</:Token>
      <literal>"="</literal>
      <symbol>expression</symbol>
    </term>
  </definition>
  <definition>
    <symbol>directive</symbol>
    <term>
      <literal>"@"</literal>
      <:Token>§</:Token>
      <symbol>symbol</symbol>
      <literal>"="</literal>
      <expression>
        <symbol>regexp</symbol>
        <symbol>literal</symbol>
        <symbol>symbol</symbol>
      </expression>
      <repetition>
        <term>
          <literal>","</literal>
          <expression>
            <symbol>regexp</symbol>
            <symbol>literal</symbol>
            <symbol>symbol</symbol>
          </expression>
        </term>
      </repetition>
    </term>
  </definition>
  <definition>
    <symbol>expression</symbol>
    <term>
      <symbol>term</symbol>
      <repetition>
        <term>
          <literal>"|"</literal>
          <symbol>term</symbol>
        </term>
      </repetition>
    </term>
  </definition>
  <definition>
    <symbol>term</symbol>
    <oneormore>
      <term>
        <option>
          <literal>"§"</literal>
        </option>
        <symbol>factor</symbol>
      </term>
    </oneormore>
  </definition>
  <definition>
    <symbol>factor</symbol>
    <expression>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <option>
          <symbol>retrieveop</symbol>
        </option>
        <symbol>symbol</symbol>
        <factor>
          <flowmarker>!</flowmarker>
          <literal>"="</literal>
        </factor>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>literal</symbol>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>plaintext</symbol>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>regexp</symbol>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>whitespace</symbol>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>oneormore</symbol>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>group</symbol>
      </term>
      <term>
        <option>
          <symbol>flowmarker</symbol>
        </option>
        <symbol>unordered</symbol>
      </term>
      <symbol>repetition</symbol>
      <symbol>option</symbol>
    </expression>
  </definition>
  <definition>
    <symbol>flowmarker</symbol>
    <expression>
      <literal>"!"</literal>
      <literal>"&amp;"</literal>
      <literal>"-!"</literal>
      <literal>"-&amp;"</literal>
    </expression>
  </definition>
  <definition>
    <symbol>retrieveop</symbol>
    <expression>
      <literal>"::"</literal>
      <literal>":"</literal>
    </expression>
  </definition>
  <definition>
    <symbol>group</symbol>
    <term>
      <literal>"("</literal>
      <:Token>§</:Token>
      <symbol>expression</symbol>
      <literal>")"</literal>
    </term>
  </definition>
  <definition>
    <symbol>unordered</symbol>
    <term>
      <literal>"&lt;"</literal>
      <:Token>§</:Token>
      <symbol>expression</symbol>
      <literal>"&gt;"</literal>
    </term>
  </definition>
  <definition>
    <symbol>oneormore</symbol>
    <term>
      <literal>"{"</literal>
      <symbol>expression</symbol>
      <literal>"}+"</literal>
    </term>
  </definition>
  <definition>
    <symbol>repetition</symbol>
    <term>
      <literal>"{"</literal>
      <:Token>§</:Token>
      <symbol>expression</symbol>
      <literal>"}"</literal>
    </term>
  </definition>
  <definition>
    <symbol>option</symbol>
    <term>
      <literal>"["</literal>
      <:Token>§</:Token>
      <symbol>expression</symbol>
      <literal>"]"</literal>
    </term>
  </definition>
  <definition>
    <symbol>symbol</symbol>
    <term>
      <regexp>/(?!\d)\w+/</regexp>
      <whitespace>~</whitespace>
    </term>
  </definition>
  <definition>
    <symbol>literal</symbol>
    <expression>
      <term>
        <regexp>/"(?:(?&lt;!\\)\\"|[^"])*?"/</regexp>
        <whitespace>~</whitespace>
      </term>
      <term>
        <regexp>/'(?:(?&lt;!\\)\\'|[^'])*?'/</regexp>
        <whitespace>~</whitespace>
      </term>
    </expression>
  </definition>
  <definition>
    <symbol>plaintext</symbol>
    <term>
      <regexp>/`(?:(?&lt;!\\)\\`|[^`])*?`/</regexp>
      <whitespace>~</whitespace>
    </term>
  </definition>
  <definition>
    <symbol>regexp</symbol>
    <term>
      <regexp>/\/(?:(?&lt;!\\)\\(?:\/)|[^\/])*?\//</regexp>
      <whitespace>~</whitespace>
    </term>
  </definition>
  <definition>
    <symbol>whitespace</symbol>
    <term>
      <regexp>/~/</regexp>
      <whitespace>~</whitespace>
    </term>
  </definition>
  <definition>
    <symbol>EOF</symbol>
    <factor>
      <flowmarker>!</flowmarker>
      <regexp>/./</regexp>
    </factor>
  </definition>
</syntax>
